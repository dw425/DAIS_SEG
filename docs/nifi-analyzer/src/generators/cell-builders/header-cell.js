/**
 * generators/cell-builders/header-cell.js — Header Cell Builder
 *
 * Builds the markdown header cell for the generated Databricks notebook,
 * including flow name, processor counts, coverage, and enhancement list.
 *
 * Extracted from generateDatabricksNotebook header logic (index.html ~line 5789).
 *
 * @module generators/cell-builders/header-cell
 */

/**
 * Build the notebook header markdown cell.
 *
 * @param {Object} options
 * @param {string} options.flowName — NiFi flow / process group name
 * @param {number} options.totalProcessors — total processor count
 * @param {number} options.mappedCount — number of mapped processors
 * @param {number} options.coveragePct — coverage percentage (0-100)
 * @param {string} options.qualifiedSchema — fully qualified schema name
 * @returns {Object} — cell object { type, label, source, role }
 */
export function buildHeaderCell({ flowName, totalProcessors, mappedCount, coveragePct, qualifiedSchema }) {
  const source = `# NiFi Migration: ${flowName}\n` +
    `Generated by SEG Demo | ${new Date().toISOString().split('T')[0]}\n\n` +
    `**Processors:** ${totalProcessors} | **Mapped:** ${mappedCount} | **Coverage:** ${coveragePct}%\n\n` +
    `**Target:** ${qualifiedSchema}\n\n` +
    `**Enhancements:** DataFrame Lineage | Smart Imports | Topo-Sort | Adaptive Code | Error Framework | Auto Recovery | Full Properties | Relationship Routing | Exec Report | E2E Validation`;
  return { type: 'md', label: 'Header', source, role: 'config' };
}
